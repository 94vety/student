{"ast":null,"code":"import { makeAutoObservable } from \"mobx\";\nimport { message } from \"antd\";\nimport { booksSearch, booksKind, login, register } from \"../services/index.js\";\n\nclass Mobx {\n  constructor() {\n    this.booksPageNum = 0;\n    this.booksData = [];\n    this.booksKindData = [];\n\n    this.login = async data => {\n      await login(data).then(event => {\n        const {\n          data: {\n            code,\n            token,\n            message: reMessage\n          }\n        } = event;\n\n        if (!code) {\n          console.log(token);\n          message.success(\"登录成功\");\n          resolve(true);\n        } else {\n          message.error(reMessage);\n          return false;\n        }\n      });\n    };\n\n    this.register = async data => {\n      console.log(data);\n      await register(data).then(event => {\n        const {\n          data: {\n            code,\n            token,\n            message: reMessage\n          }\n        } = event;\n\n        if (!code) {\n          console.log(token);\n          message.success(\"注册成功自动登录\");\n          return true;\n        } else {\n          message.error(reMessage);\n          return false;\n        }\n      });\n    };\n\n    this.booksSearch = async data => {\n      await booksSearch(data).then(event => {\n        const {\n          data: {\n            books,\n            num_pages\n          }\n        } = event;\n        this.booksData = books;\n        this.booksPageNum = num_pages + 1;\n      });\n    };\n\n    this.booksSearchAdd = async data => {\n      if (data.page < this.booksPageNum) {\n        await booksSearch(data).then(event => {\n          const {\n            data: {\n              books\n            }\n          } = event;\n          this.booksData = [...this.booksData, ...books];\n        });\n      } else {\n        message.warning(\"无更多书籍\");\n      }\n    };\n\n    this.booksKindRequest = async () => {\n      await booksKind().then(event => {\n        this.booksKindData = event.data;\n      });\n    };\n\n    makeAutoObservable(this, {});\n  }\n\n}\n\nconst myStore = new Mobx();\nexport default myStore;","map":{"version":3,"sources":["/Users/wuliangrui/Desktop/库里泡/item/student/src/store/index.js"],"names":["makeAutoObservable","message","booksSearch","booksKind","login","register","Mobx","constructor","booksPageNum","booksData","booksKindData","data","then","event","code","token","reMessage","console","log","success","resolve","error","books","num_pages","booksSearchAdd","page","warning","booksKindRequest","myStore"],"mappings":"AAAA,SACIA,kBADJ,QAEO,MAFP;AAGA,SAASC,OAAT,QAAwB,MAAxB;AACA,SACIC,WADJ,EAEIC,SAFJ,EAGIC,KAHJ,EAGWC,QAHX,QAIO,sBAJP;;AAMA,MAAMC,IAAN,CAAW;AAKPC,EAAAA,WAAW,GAAG;AAAA,SAJdC,YAIc,GAJC,CAID;AAAA,SAHdC,SAGc,GAHF,EAGE;AAAA,SAFdC,aAEc,GAFE,EAEF;;AAAA,SAMdN,KANc,GAMN,MAAMO,IAAN,IAAe;AACnB,YAAMP,KAAK,CAACO,IAAD,CAAL,CAAYC,IAAZ,CAAiBC,KAAK,IAAI;AAC5B,cAAM;AACFF,UAAAA,IAAI,EAAE;AACFG,YAAAA,IADE;AACIC,YAAAA,KADJ;AAEFd,YAAAA,OAAO,EAAEe;AAFP;AADJ,YAKFH,KALJ;;AAMA,YAAI,CAACC,IAAL,EAAW;AACPG,UAAAA,OAAO,CAACC,GAAR,CAAYH,KAAZ;AACAd,UAAAA,OAAO,CAACkB,OAAR,CAAgB,MAAhB;AACAC,UAAAA,OAAO,CAAC,IAAD,CAAP;AACH,SAJD,MAIO;AACHnB,UAAAA,OAAO,CAACoB,KAAR,CAAcL,SAAd;AACA,iBAAO,KAAP;AACH;AACJ,OAfK,CAAN;AAgBH,KAvBa;;AAAA,SAyBdX,QAzBc,GAyBH,MAAMM,IAAN,IAAe;AACtBM,MAAAA,OAAO,CAACC,GAAR,CAAYP,IAAZ;AACA,YAAMN,QAAQ,CAACM,IAAD,CAAR,CAAeC,IAAf,CAAoBC,KAAK,IAAI;AAC/B,cAAM;AACFF,UAAAA,IAAI,EAAE;AACFG,YAAAA,IADE;AACIC,YAAAA,KADJ;AAEFd,YAAAA,OAAO,EAAEe;AAFP;AADJ,YAKFH,KALJ;;AAMA,YAAI,CAACC,IAAL,EAAW;AACPG,UAAAA,OAAO,CAACC,GAAR,CAAYH,KAAZ;AACAd,UAAAA,OAAO,CAACkB,OAAR,CAAgB,UAAhB;AACA,iBAAO,IAAP;AACH,SAJD,MAIO;AACHlB,UAAAA,OAAO,CAACoB,KAAR,CAAcL,SAAd;AACA,iBAAO,KAAP;AACH;AACJ,OAfK,CAAN;AAgBH,KA3Ca;;AAAA,SA6Cdd,WA7Cc,GA6CA,MAAMS,IAAN,IAAe;AACzB,YAAMT,WAAW,CAACS,IAAD,CAAX,CAAkBC,IAAlB,CAAuBC,KAAK,IAAI;AAClC,cAAM;AAAEF,UAAAA,IAAI,EAAE;AAAEW,YAAAA,KAAF;AAASC,YAAAA;AAAT;AAAR,YAAiCV,KAAvC;AACA,aAAKJ,SAAL,GAAiBa,KAAjB;AACA,aAAKd,YAAL,GAAoBe,SAAS,GAAG,CAAhC;AACH,OAJK,CAAN;AAKH,KAnDa;;AAAA,SAqDdC,cArDc,GAqDG,MAAMb,IAAN,IAAe;AAC5B,UAAIA,IAAI,CAACc,IAAL,GAAY,KAAKjB,YAArB,EAAmC;AAC/B,cAAMN,WAAW,CAACS,IAAD,CAAX,CAAkBC,IAAlB,CAAuBC,KAAK,IAAI;AAClC,gBAAM;AAAEF,YAAAA,IAAI,EAAE;AAAEW,cAAAA;AAAF;AAAR,cAAsBT,KAA5B;AACA,eAAKJ,SAAL,GAAiB,CAAC,GAAG,KAAKA,SAAT,EAAoB,GAAGa,KAAvB,CAAjB;AACH,SAHK,CAAN;AAIH,OALD,MAKO;AACHrB,QAAAA,OAAO,CAACyB,OAAR,CAAgB,OAAhB;AACH;AACJ,KA9Da;;AAAA,SAgEdC,gBAhEc,GAgEK,YAAW;AAC1B,YAAMxB,SAAS,GAAGS,IAAZ,CAAiBC,KAAK,IAAI;AAC5B,aAAKH,aAAL,GAAqBG,KAAK,CAACF,IAA3B;AACH,OAFK,CAAN;AAGH,KApEa;;AACVX,IAAAA,kBAAkB,CAAC,IAAD,EAAO,EAAP,CAAlB;AAGH;;AATM;;AA4EX,MAAM4B,OAAO,GAAG,IAAItB,IAAJ,EAAhB;AACA,eAAesB,OAAf","sourcesContent":["import {\n    makeAutoObservable\n} from \"mobx\";\nimport { message } from \"antd\";\nimport {\n    booksSearch,\n    booksKind,\n    login, register\n} from \"../services/index.js\";\n\nclass Mobx {\n    booksPageNum = 0\n    booksData = []\n    booksKindData = []\n\n    constructor() {\n        makeAutoObservable(this, {\n\n        });\n    }\n\n    login = async(data) => {\n        await login(data).then(event => {\n            const {\n                data: { \n                    code, token,\n                    message: reMessage\n                }\n            } = event;\n            if (!code) {\n                console.log(token);\n                message.success(\"登录成功\");\n                resolve(true);\n            } else {\n                message.error(reMessage);\n                return false;\n            }\n        })\n    }\n\n    register = async(data) => {\n        console.log(data);\n        await register(data).then(event => {\n            const {\n                data: { \n                    code, token,\n                    message: reMessage\n                }\n            } = event;\n            if (!code) {\n                console.log(token);\n                message.success(\"注册成功自动登录\");\n                return true;\n            } else {\n                message.error(reMessage);\n                return false;\n            }\n        })\n    }\n\n    booksSearch = async(data) => {\n        await booksSearch(data).then(event => {\n            const { data: { books, num_pages } } = event;\n            this.booksData = books;\n            this.booksPageNum = num_pages + 1;\n        });\n    }\n\n    booksSearchAdd = async(data) => {\n        if (data.page < this.booksPageNum) {\n            await booksSearch(data).then(event => {\n                const { data: { books } } = event;\n                this.booksData = [...this.booksData, ...books]\n            })\n        } else {\n            message.warning(\"无更多书籍\");\n        }\n    }\n\n    booksKindRequest = async() => {\n        await booksKind().then(event => {\n            this.booksKindData = event.data;\n        })\n    }\n}\n\nconst myStore = new Mobx();\nexport default myStore;\n\n"]},"metadata":{},"sourceType":"module"}