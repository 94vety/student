{"ast":null,"code":"import axios from 'axios';\nimport qs from 'qs';\naxios.interceptors.request.use(config => {\n  // loading\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\naxios.interceptors.response.use(response => {\n  return response;\n}, error => {\n  return Promise.resolve(error.response);\n});\n\nfunction checkStatus(response) {\n  // loading\n  // 如果http状态码正常，则直接返回数据\n  if (response && (response.status === 200 || response.status === 304 || response.status === 400)) {\n    return response; // 如果不需要除了data之外的数据，可以直接 return response.data\n  } // 异常状态下，把错误信息返回去\n\n\n  return {\n    status: -404,\n    msg: '网络异常'\n  };\n}\n\nfunction checkCode(res) {\n  // 如果code异常(这里已经包括网络错误，服务器错误，后端抛出的错误)，可以弹出一个错误提示，告诉用户\n  if (res.status === -404) {\n    alert(res.msg);\n  }\n\n  if (res.data && !res.data.success) {\n    alert(res.data.error_msg);\n  }\n\n  return res;\n}\n\nexport default {\n  post(url, data) {\n    return axios({\n      method: 'post',\n      baseURL: 'https://cnodejs.org/api/v1',\n      url,\n      data: qs.stringify(data),\n      timeout: 10000,\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n        'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n      }\n    }).then(response => {\n      return checkStatus(response);\n    }).then(res => {\n      return checkCode(res);\n    });\n  },\n\n  get(url, params) {\n    return axios({\n      method: 'get',\n      baseURL: 'https://cnodejs.org/api/v1',\n      url,\n      params,\n      // get 请求时带的参数\n      timeout: 10000,\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest'\n      }\n    }).then(response => {\n      return checkStatus(response);\n    }).then(res => {\n      return checkCode(res);\n    });\n  }\n\n};","map":{"version":3,"sources":["/Users/wuliangrui/Desktop/库里泡/item/student/src/utils/request.js"],"names":["axios","qs","interceptors","request","use","config","error","Promise","reject","response","resolve","checkStatus","status","msg","checkCode","res","alert","data","success","error_msg","post","url","method","baseURL","stringify","timeout","headers","then","get","params"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,IAAf;AAEAD,KAAK,CAACE,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+BC,MAAM,IAAI;AACrC;AACA,SAAOA,MAAP;AACH,CAHD,EAGGC,KAAK,IAAI;AACR,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CALD;AAOAN,KAAK,CAACE,YAAN,CAAmBO,QAAnB,CAA4BL,GAA5B,CAAgCK,QAAQ,IAAI;AACxC,SAAOA,QAAP;AACH,CAFD,EAEGH,KAAK,IAAI;AACR,SAAOC,OAAO,CAACG,OAAR,CAAgBJ,KAAK,CAACG,QAAtB,CAAP;AACH,CAJD;;AAMA,SAASE,WAAT,CAAqBF,QAArB,EAA+B;AAC3B;AACA;AACA,MAAIA,QAAQ,KAAKA,QAAQ,CAACG,MAAT,KAAoB,GAApB,IAA2BH,QAAQ,CAACG,MAAT,KAAoB,GAA/C,IAAsDH,QAAQ,CAACG,MAAT,KAAoB,GAA/E,CAAZ,EAAiG;AAC7F,WAAOH,QAAP,CAD6F,CAE7F;AACH,GAN0B,CAO3B;;;AACA,SAAO;AACHG,IAAAA,MAAM,EAAE,CAAC,GADN;AAEHC,IAAAA,GAAG,EAAE;AAFF,GAAP;AAIH;;AAED,SAASC,SAAT,CAAmBC,GAAnB,EAAwB;AACpB;AACA,MAAIA,GAAG,CAACH,MAAJ,KAAe,CAAC,GAApB,EAAyB;AACrBI,IAAAA,KAAK,CAACD,GAAG,CAACF,GAAL,CAAL;AACH;;AACD,MAAIE,GAAG,CAACE,IAAJ,IAAa,CAACF,GAAG,CAACE,IAAJ,CAASC,OAA3B,EAAqC;AACjCF,IAAAA,KAAK,CAACD,GAAG,CAACE,IAAJ,CAASE,SAAV,CAAL;AACH;;AACD,SAAOJ,GAAP;AACH;;AAED,eAAe;AACXK,EAAAA,IAAI,CAACC,GAAD,EAAMJ,IAAN,EAAY;AACZ,WAAOjB,KAAK,CAAC;AACTsB,MAAAA,MAAM,EAAE,MADC;AAETC,MAAAA,OAAO,EAAE,4BAFA;AAGTF,MAAAA,GAHS;AAITJ,MAAAA,IAAI,EAAEhB,EAAE,CAACuB,SAAH,CAAaP,IAAb,CAJG;AAKTQ,MAAAA,OAAO,EAAE,KALA;AAMTC,MAAAA,OAAO,EAAE;AACL,4BAAoB,gBADf;AAEL,wBAAgB;AAFX;AANA,KAAD,CAAL,CAUJC,IAVI,CAWFlB,QAAD,IAAc;AACV,aAAOE,WAAW,CAACF,QAAD,CAAlB;AACH,KAbE,EAcLkB,IAdK,CAeFZ,GAAD,IAAS;AACL,aAAOD,SAAS,CAACC,GAAD,CAAhB;AACH,KAjBE,CAAP;AAmBH,GArBU;;AAsBXa,EAAAA,GAAG,CAACP,GAAD,EAAMQ,MAAN,EAAc;AACb,WAAO7B,KAAK,CAAC;AACTsB,MAAAA,MAAM,EAAE,KADC;AAETC,MAAAA,OAAO,EAAE,4BAFA;AAGTF,MAAAA,GAHS;AAITQ,MAAAA,MAJS;AAID;AACRJ,MAAAA,OAAO,EAAE,KALA;AAMTC,MAAAA,OAAO,EAAE;AACL,4BAAoB;AADf;AANA,KAAD,CAAL,CASJC,IATI,CAUFlB,QAAD,IAAc;AACV,aAAOE,WAAW,CAACF,QAAD,CAAlB;AACH,KAZE,EAaLkB,IAbK,CAcFZ,GAAD,IAAS;AACL,aAAOD,SAAS,CAACC,GAAD,CAAhB;AACH,KAhBE,CAAP;AAkBH;;AAzCU,CAAf","sourcesContent":["import axios from 'axios'\nimport qs from 'qs'\n\naxios.interceptors.request.use(config => {\n    // loading\n    return config\n}, error => {\n    return Promise.reject(error)\n})\n\naxios.interceptors.response.use(response => {\n    return response\n}, error => {\n    return Promise.resolve(error.response)\n})\n\nfunction checkStatus(response) {\n    // loading\n    // 如果http状态码正常，则直接返回数据\n    if (response && (response.status === 200 || response.status === 304 || response.status === 400)) {\n        return response\n        // 如果不需要除了data之外的数据，可以直接 return response.data\n    }\n    // 异常状态下，把错误信息返回去\n    return {\n        status: -404,\n        msg: '网络异常'\n    }\n}\n\nfunction checkCode(res) {\n    // 如果code异常(这里已经包括网络错误，服务器错误，后端抛出的错误)，可以弹出一个错误提示，告诉用户\n    if (res.status === -404) {\n        alert(res.msg)\n    }\n    if (res.data && (!res.data.success)) {\n        alert(res.data.error_msg)\n    }\n    return res\n}\n\nexport default {\n    post(url, data) {\n        return axios({\n            method: 'post',\n            baseURL: 'https://cnodejs.org/api/v1',\n            url,\n            data: qs.stringify(data),\n            timeout: 10000,\n            headers: {\n                'X-Requested-With': 'XMLHttpRequest',\n                'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\n            }\n        }).then(\n            (response) => {\n                return checkStatus(response)\n            }\n        ).then(\n            (res) => {\n                return checkCode(res)\n            }\n        )\n    },\n    get(url, params) {\n        return axios({\n            method: 'get',\n            baseURL: 'https://cnodejs.org/api/v1',\n            url,\n            params, // get 请求时带的参数\n            timeout: 10000,\n            headers: {\n                'X-Requested-With': 'XMLHttpRequest'\n            }\n        }).then(\n            (response) => {\n                return checkStatus(response)\n            }\n        ).then(\n            (res) => {\n                return checkCode(res)\n            }\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}