{"ast":null,"code":"import { computed, makeAutoObservable } from \"mobx\";\nimport { booksSearch, booksKind } from \"../services/index.js\";\n\nclass Mobx {\n  constructor() {\n    this.booksPageNum = 0;\n    this.booksData = [];\n    this.booksKindData = [];\n\n    this.booksSearch = async data => {\n      await booksSearch(data).then(event => {\n        console.log(event);\n        const {\n          data: {\n            books,\n            num_pages\n          }\n        } = event;\n        this.booksData = books;\n        this.booksPageNum = num_pages + 1;\n      });\n    };\n\n    this.booksSearchAdd = async data => {\n      if (data.page < num_pages) {\n        await booksSearch(data).then(event => {\n          const {\n            data: {\n              books\n            }\n          } = event;\n          this.booksData = [...this.booksData, ...books];\n        });\n      } else {\n        alert(\"无更多书籍\");\n      }\n    };\n\n    this.booksKindRequest = async () => {\n      await booksKind().then(event => {\n        this.booksKindData = event.data;\n      });\n    };\n\n    makeAutoObservable(this, {\n      getBooksData: computed\n    });\n  }\n\n  get getBooksData() {\n    return this.booksData;\n  }\n\n}\n\nconst myStore = new Mobx();\nexport default myStore;","map":{"version":3,"sources":["/Users/wuliangrui/Desktop/库里泡/item/student/src/store/index.js"],"names":["computed","makeAutoObservable","booksSearch","booksKind","Mobx","constructor","booksPageNum","booksData","booksKindData","data","then","event","console","log","books","num_pages","booksSearchAdd","page","alert","booksKindRequest","getBooksData","myStore"],"mappings":"AAAA,SACIA,QADJ,EACcC,kBADd,QAEO,MAFP;AAGA,SACIC,WADJ,EAEIC,SAFJ,QAGO,sBAHP;;AAKA,MAAMC,IAAN,CAAW;AAKPC,EAAAA,WAAW,GAAG;AAAA,SAJdC,YAIc,GAJC,CAID;AAAA,SAHdC,SAGc,GAHF,EAGE;AAAA,SAFdC,aAEc,GAFE,EAEF;;AAAA,SAUdN,WAVc,GAUA,MAAMO,IAAN,IAAe;AACzB,YAAMP,WAAW,CAACO,IAAD,CAAX,CAAkBC,IAAlB,CAAuBC,KAAK,IAAI;AAClCC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,cAAM;AAAEF,UAAAA,IAAI,EAAE;AAAEK,YAAAA,KAAF;AAASC,YAAAA;AAAT;AAAR,YAAiCJ,KAAvC;AACA,aAAKJ,SAAL,GAAiBO,KAAjB;AACA,aAAKR,YAAL,GAAoBS,SAAS,GAAG,CAAhC;AACH,OALK,CAAN;AAMH,KAjBa;;AAAA,SAmBdC,cAnBc,GAmBG,MAAMP,IAAN,IAAe;AAC5B,UAAIA,IAAI,CAACQ,IAAL,GAAYF,SAAhB,EAA2B;AACvB,cAAMb,WAAW,CAACO,IAAD,CAAX,CAAkBC,IAAlB,CAAuBC,KAAK,IAAI;AAClC,gBAAM;AAAEF,YAAAA,IAAI,EAAE;AAAEK,cAAAA;AAAF;AAAR,cAAsBH,KAA5B;AACA,eAAKJ,SAAL,GAAiB,CAAC,GAAG,KAAKA,SAAT,EAAoB,GAAGO,KAAvB,CAAjB;AACH,SAHK,CAAN;AAIH,OALD,MAKO;AACHI,QAAAA,KAAK,CAAC,OAAD,CAAL;AACH;AACJ,KA5Ba;;AAAA,SA8BdC,gBA9Bc,GA8BK,YAAW;AAC1B,YAAMhB,SAAS,GAAGO,IAAZ,CAAiBC,KAAK,IAAI;AAC5B,aAAKH,aAAL,GAAqBG,KAAK,CAACF,IAA3B;AACH,OAFK,CAAN;AAGH,KAlCa;;AACVR,IAAAA,kBAAkB,CAAC,IAAD,EAAO;AACrBmB,MAAAA,YAAY,EAAEpB;AADO,KAAP,CAAlB;AAGH;;AAEe,MAAZoB,YAAY,GAAG;AACf,WAAO,KAAKb,SAAZ;AACH;;AAbM;;AA0CX,MAAMc,OAAO,GAAG,IAAIjB,IAAJ,EAAhB;AACA,eAAeiB,OAAf","sourcesContent":["import {\n    computed, makeAutoObservable\n} from \"mobx\";\nimport {\n    booksSearch,\n    booksKind\n} from \"../services/index.js\";\n\nclass Mobx {\n    booksPageNum = 0\n    booksData = []\n    booksKindData = []\n\n    constructor() {\n        makeAutoObservable(this, {\n            getBooksData: computed\n        });\n    }\n\n    get getBooksData() {\n        return this.booksData;\n    }\n\n    booksSearch = async(data) => {\n        await booksSearch(data).then(event => {\n            console.log(event);\n            const { data: { books, num_pages } } = event;\n            this.booksData = books;\n            this.booksPageNum = num_pages + 1;\n        });\n    }\n\n    booksSearchAdd = async(data) => {\n        if (data.page < num_pages) {\n            await booksSearch(data).then(event => {\n                const { data: { books } } = event;\n                this.booksData = [...this.booksData, ...books]\n            })\n        } else {\n            alert(\"无更多书籍\")\n        }\n    }\n\n    booksKindRequest = async() => {\n        await booksKind().then(event => {\n            this.booksKindData = event.data;\n        })\n    }\n}\n\nconst myStore = new Mobx();\nexport default myStore;\n\n"]},"metadata":{},"sourceType":"module"}